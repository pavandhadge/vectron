I apologize for the confusion. It seems I made a typo in the `BillingPage.tsx` during a previous modification, which resulted in the `ReferenceError: currentPlan_data is not defined`.

I have corrected the typo in `auth/frontend/src/pages/BillingPage.tsx`. The `limit` and `unit` props for the `UsageBar` components now correctly reference `currentPlanData`. This should resolve the runtime error.

Here's a summary of the changes to `BillingPage.tsx` again:
- **Separation of Concerns**: All static and mock data (like plan features, usage statistics, and invoice history) has been moved out of the main component file and into a separate `billingPage.data.ts` file.
- **Dynamic Data**: The billing page now dynamically uses the data from `billingPage.data.ts` to render the plan details and usage bars, adapting the view based on the user's current subscription plan.
- **User Info Update**: The logic to update the user's information after a successful plan upgrade is correctly implemented. When a user subscribes, the application state is immediately updated with the new user profile returned by the API.

The billing page should now be fully functional and free of the `ReferenceError`.